{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Aurite Configuration File",
  "description": "Configuration file for Aurite Agents components",
  "oneOf": [
    {
      "type": "array",
      "items": {
        "oneOf": [
          {
            "description": "Configuration for an Agent instance.\n\nDefines agent-specific settings and links to the host configuration\nthat provides the necessary MCP clients and capabilities.",
            "properties": {
              "name": {
                "description": "The unique name of the component.",
                "title": "Name",
                "type": "string"
              },
              "description": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "A brief description of the component.",
                "title": "Description"
              },
              "type": {
                "const": "agent",
                "default": "agent",
                "title": "Type",
                "type": "string"
              },
              "mcp_servers": {
                "anyOf": [
                  {
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "List of mcp_server names this agent can use.",
                "title": "Mcp Servers"
              },
              "auto": {
                "anyOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": false,
                "description": "If true, an LLM will dynamically select client_ids for the agent at runtime.",
                "title": "Auto"
              },
              "llm_config_id": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "ID of the LLMConfig to use for this agent.",
                "title": "Llm Config Id"
              },
              "llm": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/LLMConfigOverrides"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "LLM parameters to override the base LLMConfig."
              },
              "system_prompt": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "The primary system prompt for the agent.",
                "title": "System Prompt"
              },
              "config_validation_schema": {
                "anyOf": [
                  {
                    "additionalProperties": true,
                    "type": "object"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "JSON schema for validating agent-specific configurations.",
                "title": "Config Validation Schema"
              },
              "max_iterations": {
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": 50,
                "description": "Max conversation turns before stopping.",
                "title": "Max Iterations"
              },
              "include_history": {
                "anyOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Whether to include the conversation history, or just the latest message.",
                "title": "Include History"
              },
              "include_logging": {
                "anyOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Whether to enable Langfuse logging for this agent, overriding global settings.",
                "title": "Include Logging"
              },
              "exclude_components": {
                "anyOf": [
                  {
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "List of component names (tool, prompt, resource) to specifically exclude for this agent, even if provided by allowed clients.",
                "title": "Exclude Components"
              },
              "evaluation": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Optional runtime evaluation. Set to the name of a file in config/testing, or a prompt describing expected output for simple evaluation.",
                "title": "Evaluation"
              }
            },
            "required": [
              "name"
            ],
            "title": "AgentConfig",
            "type": "object"
          },
          {
            "additionalProperties": true,
            "description": "Configuration for a specific LLM setup.",
            "properties": {
              "name": {
                "description": "The unique name of the component.",
                "title": "Name",
                "type": "string"
              },
              "description": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "A brief description of the component.",
                "title": "Description"
              },
              "type": {
                "const": "llm",
                "default": "llm",
                "title": "Type",
                "type": "string"
              },
              "provider": {
                "description": "The LLM provider (e.g., 'anthropic', 'openai', 'gemini').",
                "title": "Provider",
                "type": "string"
              },
              "model": {
                "description": "The specific model name for the provider.",
                "title": "Model",
                "type": "string"
              },
              "temperature": {
                "anyOf": [
                  {
                    "type": "number"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Default sampling temperature.",
                "title": "Temperature"
              },
              "max_tokens": {
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Default maximum tokens to generate.",
                "title": "Max Tokens"
              },
              "default_system_prompt": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "A default system prompt for this LLM configuration.",
                "title": "Default System Prompt"
              },
              "api_key_env_var": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Environment variable name for the API key (if not using default like ANTHROPIC_API_KEY).",
                "title": "Api Key Env Var"
              },
              "api_base": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "The base URL for the LLM.",
                "title": "Api Base"
              },
              "api_version": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "The API version for the LLM.",
                "title": "Api Version"
              }
            },
            "required": [
              "name",
              "provider",
              "model"
            ],
            "title": "LLMConfig",
            "type": "object"
          },
          {
            "description": "Configuration for an MCP client",
            "properties": {
              "name": {
                "description": "The unique name of the component.",
                "title": "Name",
                "type": "string"
              },
              "description": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "A brief description of the component.",
                "title": "Description"
              },
              "type": {
                "const": "mcp_server",
                "default": "mcp_server",
                "title": "Type",
                "type": "string"
              },
              "transport_type": {
                "anyOf": [
                  {
                    "enum": [
                      "stdio",
                      "http_stream",
                      "local"
                    ],
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "The transport type for the client.",
                "title": "Transport Type"
              },
              "server_path": {
                "anyOf": [
                  {
                    "type": "string",
                    "format": "path",
                    "pattern": "^[a-zA-Z0-9\\._\\-/\\\\~][a-zA-Z0-9\\._\\-/\\\\ ~]*$",
                    "patternErrorMessage": "Invalid path format. Avoid special characters like |, <, >, &, ;, $, `. Spaces are allowed but not recommended - use underscores or hyphens instead.",
                    "description": "Path to the server script for 'stdio' transport. Examples: 'mcp_servers/weather_server.py', './scripts/my_server.py', '~/projects/server.py'. Avoid spaces in paths when possible.",
                    "markdownDescription": "**File path** - Path to the server script for 'stdio' transport. Examples: 'mcp_servers/weather_server.py', './scripts/my_server.py', '~/projects/server.py'. Avoid spaces in paths when possible."
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Path to the server script for 'stdio' transport. Examples: 'mcp_servers/weather_server.py', './scripts/my_server.py', '~/projects/server.py'. Avoid spaces in paths when possible.",
                "title": "Server Path"
              },
              "http_endpoint": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "URL endpoint for 'http_stream' transport.",
                "title": "Http Endpoint"
              },
              "headers": {
                "anyOf": [
                  {
                    "additionalProperties": {
                      "type": "string"
                    },
                    "type": "object"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "HTTP headers for 'http_stream' transport.",
                "title": "Headers"
              },
              "command": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "The command to run for 'local' transport.",
                "title": "Command"
              },
              "args": {
                "anyOf": [
                  {
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Arguments for the 'local' transport command.",
                "title": "Args"
              },
              "roots": {
                "description": "List of root configurations for this client.",
                "items": {
                  "$ref": "#/$defs/RootConfig"
                },
                "title": "Roots",
                "type": "array"
              },
              "capabilities": {
                "description": "List of capabilities this client provides (e.g., 'tools', 'prompts').",
                "items": {
                  "enum": [
                    "tools",
                    "prompts",
                    "resources"
                  ],
                  "type": "string"
                },
                "title": "Capabilities",
                "type": "array"
              },
              "timeout": {
                "default": 10.0,
                "description": "Default timeout in seconds for client operations.",
                "title": "Timeout",
                "type": "number"
              },
              "registration_timeout": {
                "default": 30.0,
                "description": "Timeout for registering the mcp client",
                "title": "Registration Timeout",
                "type": "number"
              },
              "exclude": {
                "anyOf": [
                  {
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "List of component names (prompt, resource, tool) to exclude from this client.",
                "title": "Exclude"
              }
            },
            "required": [
              "name",
              "capabilities"
            ],
            "title": "ClientConfig",
            "type": "object"
          },
          {
            "description": "Configuration for the MCP host",
            "properties": {
              "name": {
                "description": "The unique name of the component.",
                "title": "Name",
                "type": "string"
              },
              "description": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "A brief description of the component.",
                "title": "Description"
              },
              "type": {
                "const": "host",
                "default": "host",
                "title": "Type",
                "type": "string"
              },
              "mcp_servers": {
                "description": "A list of MCP server client configurations.",
                "items": {
                  "$ref": "#/$defs/ClientConfig"
                },
                "title": "Mcp Servers",
                "type": "array"
              }
            },
            "required": [
              "name",
              "mcp_servers"
            ],
            "title": "HostConfig",
            "type": "object"
          },
          {
            "description": "Configuration for a linear, sequential agent workflow.",
            "properties": {
              "name": {
                "description": "The unique name of the component.",
                "title": "Name",
                "type": "string"
              },
              "description": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "A brief description of the component.",
                "title": "Description"
              },
              "type": {
                "const": "linear_workflow",
                "default": "linear_workflow",
                "title": "Type",
                "type": "string"
              },
              "steps": {
                "description": "List of component names or component objects to execute in sequence.",
                "items": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/WorkflowComponent"
                    }
                  ]
                },
                "title": "Steps",
                "type": "array"
              },
              "include_history": {
                "anyOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "If set, overrides the include_history setting for all agents in this workflow.",
                "title": "Include History"
              },
              "include_logging": {
                "anyOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "If set, overrides the include_logging setting for all agents in this workflow.",
                "title": "Include Logging"
              }
            },
            "required": [
              "name",
              "steps"
            ],
            "title": "WorkflowConfig",
            "type": "object"
          },
          {
            "description": "Configuration for graph workflows",
            "properties": {
              "name": {
                "description": "The unique name of the component.",
                "title": "Name",
                "type": "string"
              },
              "description": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "A brief description of the component.",
                "title": "Description"
              },
              "type": {
                "const": "graph_workflow",
                "default": "graph_workflow",
                "title": "Type",
                "type": "string"
              },
              "nodes": {
                "description": "List of nodes in the graph.",
                "items": {
                  "$ref": "#/$defs/GraphWorkflowNode"
                },
                "title": "Nodes",
                "type": "array"
              },
              "edges": {
                "description": "List of edges in the graph.",
                "items": {
                  "$ref": "#/$defs/GraphWorkflowEdge"
                },
                "title": "Edges",
                "type": "array"
              },
              "include_history": {
                "anyOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "If set, overrides the include_history setting for all agents in this workflow.",
                "title": "Include History"
              },
              "include_logging": {
                "anyOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "If set, overrides the include_logging setting for all agents in this workflow.",
                "title": "Include Logging"
              }
            },
            "required": [
              "name",
              "nodes",
              "edges"
            ],
            "title": "GraphWorkflowConfig",
            "type": "object"
          },
          {
            "description": "Configuration for a custom Python-based workflow.",
            "properties": {
              "name": {
                "description": "The unique name of the component.",
                "title": "Name",
                "type": "string"
              },
              "description": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "A brief description of the component.",
                "title": "Description"
              },
              "type": {
                "const": "custom_workflow",
                "default": "custom_workflow",
                "title": "Type",
                "type": "string"
              },
              "module_path": {
                "description": "Resolved absolute path to the Python file containing the workflow class. Examples: 'mcp_servers/weather_server.py', './scripts/my_server.py', '~/projects/server.py'. Avoid spaces in paths when possible.",
                "format": "path",
                "title": "Module Path",
                "type": "string",
                "pattern": "^[a-zA-Z0-9\\._\\-/\\\\~][a-zA-Z0-9\\._\\-/\\\\ ~]*$",
                "patternErrorMessage": "Invalid path format. Avoid special characters like |, <, >, &, ;, $, `. Spaces are allowed but not recommended - use underscores or hyphens instead.",
                "markdownDescription": "**File path** - Resolved absolute path to the Python file containing the workflow class. Examples: 'mcp_servers/weather_server.py', './scripts/my_server.py', '~/projects/server.py'. Avoid spaces in paths when possible."
              },
              "class_name": {
                "description": "Name of the class within the module that implements the workflow.",
                "title": "Class Name",
                "type": "string"
              }
            },
            "required": [
              "name",
              "module_path",
              "class_name"
            ],
            "title": "CustomWorkflowConfig",
            "type": "object"
          },
          {
            "description": "Request model for QA testing.",
            "properties": {
              "name": {
                "description": "The unique name of the component.",
                "title": "Name",
                "type": "string"
              },
              "description": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "A brief description of the component.",
                "title": "Description"
              },
              "component_type": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Type of component being tested (agent, llm, mcp_server, workflow)",
                "title": "Component Type"
              },
              "component_config": {
                "anyOf": [
                  {
                    "additionalProperties": true,
                    "type": "object"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "Configuration of the component being tested",
                "title": "Component Config"
              },
              "test_cases": {
                "description": "List of test cases to evaluate",
                "items": {
                  "$ref": "#/$defs/EvaluationCase"
                },
                "title": "Test Cases",
                "type": "array"
              },
              "review_llm": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "LLM configuration ID to use for reviewing test results",
                "title": "Review Llm"
              },
              "expected_schema": {
                "anyOf": [
                  {
                    "additionalProperties": true,
                    "type": "object"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "JSON schema to validate output against",
                "title": "Expected Schema"
              },
              "component_refs": {
                "anyOf": [
                  {
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "List of component names to evaluate (for multi-component testing)",
                "title": "Component Refs"
              },
              "run_agent": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "A function that takes a string input and any number of additional arguments (see run_agent_kwargs) and returns the result of calling the agent.\n        This will be used for cases that do not have an output. If str, it will be treated as the filepath to a python file with the function named 'run'",
                "title": "Run Agent"
              },
              "run_agent_kwargs": {
                "additionalProperties": true,
                "description": "Additional keyword arguments to pass to the run_agent function beyond the required input string first argument",
                "title": "Run Agent Kwargs",
                "type": "object"
              },
              "use_cache": {
                "default": true,
                "description": "Whether to use cached results for test cases that have been evaluated before",
                "title": "Use Cache",
                "type": "boolean"
              },
              "cache_ttl": {
                "default": 3600,
                "description": "Time-to-live for cached results in seconds (default: 1 hour)",
                "title": "Cache Ttl",
                "type": "integer"
              },
              "force_refresh": {
                "default": false,
                "description": "Force re-execution of all test cases, bypassing cache",
                "title": "Force Refresh",
                "type": "boolean"
              },
              "evaluation_config_id": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "ID of the evaluation configuration (used for cache key generation)",
                "title": "Evaluation Config Id"
              }
            },
            "required": [
              "name",
              "test_cases"
            ],
            "title": "EvaluationConfig",
            "type": "object"
          },
          {
            "description": "Configuration for security assessments.\n\nThis is a wrapper that holds the security configuration dictionary\nthat will be parsed by the SecurityEngine using its own SecurityConfig model.",
            "properties": {
              "name": {
                "description": "The unique name of the component.",
                "title": "Name",
                "type": "string"
              },
              "description": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "description": "A brief description of the component.",
                "title": "Description"
              },
              "type": {
                "const": "security",
                "default": "security",
                "title": "Type",
                "type": "string"
              },
              "config_dict": {
                "additionalProperties": true,
                "description": "Security configuration dictionary to be loaded by SecurityEngine",
                "title": "Config Dict",
                "type": "object"
              }
            },
            "required": [
              "name"
            ],
            "title": "SecurityConfig",
            "type": "object"
          }
        ]
      },
      "description": "Array of component configurations"
    },
    {
      "oneOf": [
        {
          "description": "Configuration for an Agent instance.\n\nDefines agent-specific settings and links to the host configuration\nthat provides the necessary MCP clients and capabilities.",
          "properties": {
            "name": {
              "description": "The unique name of the component.",
              "title": "Name",
              "type": "string"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "A brief description of the component.",
              "title": "Description"
            },
            "type": {
              "const": "agent",
              "default": "agent",
              "title": "Type",
              "type": "string"
            },
            "mcp_servers": {
              "anyOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "description": "List of mcp_server names this agent can use.",
              "title": "Mcp Servers"
            },
            "auto": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "default": false,
              "description": "If true, an LLM will dynamically select client_ids for the agent at runtime.",
              "title": "Auto"
            },
            "llm_config_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "ID of the LLMConfig to use for this agent.",
              "title": "Llm Config Id"
            },
            "llm": {
              "anyOf": [
                {
                  "$ref": "#/$defs/LLMConfigOverrides"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "LLM parameters to override the base LLMConfig."
            },
            "system_prompt": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "The primary system prompt for the agent.",
              "title": "System Prompt"
            },
            "config_validation_schema": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "JSON schema for validating agent-specific configurations.",
              "title": "Config Validation Schema"
            },
            "max_iterations": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "default": 50,
              "description": "Max conversation turns before stopping.",
              "title": "Max Iterations"
            },
            "include_history": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Whether to include the conversation history, or just the latest message.",
              "title": "Include History"
            },
            "include_logging": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Whether to enable Langfuse logging for this agent, overriding global settings.",
              "title": "Include Logging"
            },
            "exclude_components": {
              "anyOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "List of component names (tool, prompt, resource) to specifically exclude for this agent, even if provided by allowed clients.",
              "title": "Exclude Components"
            },
            "evaluation": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Optional runtime evaluation. Set to the name of a file in config/testing, or a prompt describing expected output for simple evaluation.",
              "title": "Evaluation"
            }
          },
          "required": [
            "name"
          ],
          "title": "AgentConfig",
          "type": "object"
        },
        {
          "additionalProperties": true,
          "description": "Configuration for a specific LLM setup.",
          "properties": {
            "name": {
              "description": "The unique name of the component.",
              "title": "Name",
              "type": "string"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "A brief description of the component.",
              "title": "Description"
            },
            "type": {
              "const": "llm",
              "default": "llm",
              "title": "Type",
              "type": "string"
            },
            "provider": {
              "description": "The LLM provider (e.g., 'anthropic', 'openai', 'gemini').",
              "title": "Provider",
              "type": "string"
            },
            "model": {
              "description": "The specific model name for the provider.",
              "title": "Model",
              "type": "string"
            },
            "temperature": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Default sampling temperature.",
              "title": "Temperature"
            },
            "max_tokens": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Default maximum tokens to generate.",
              "title": "Max Tokens"
            },
            "default_system_prompt": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "A default system prompt for this LLM configuration.",
              "title": "Default System Prompt"
            },
            "api_key_env_var": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Environment variable name for the API key (if not using default like ANTHROPIC_API_KEY).",
              "title": "Api Key Env Var"
            },
            "api_base": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "The base URL for the LLM.",
              "title": "Api Base"
            },
            "api_version": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "The API version for the LLM.",
              "title": "Api Version"
            }
          },
          "required": [
            "name",
            "provider",
            "model"
          ],
          "title": "LLMConfig",
          "type": "object"
        },
        {
          "description": "Configuration for an MCP client",
          "properties": {
            "name": {
              "description": "The unique name of the component.",
              "title": "Name",
              "type": "string"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "A brief description of the component.",
              "title": "Description"
            },
            "type": {
              "const": "mcp_server",
              "default": "mcp_server",
              "title": "Type",
              "type": "string"
            },
            "transport_type": {
              "anyOf": [
                {
                  "enum": [
                    "stdio",
                    "http_stream",
                    "local"
                  ],
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "The transport type for the client.",
              "title": "Transport Type"
            },
            "server_path": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "path",
                  "pattern": "^[a-zA-Z0-9\\._\\-/\\\\~][a-zA-Z0-9\\._\\-/\\\\ ~]*$",
                  "patternErrorMessage": "Invalid path format. Avoid special characters like |, <, >, &, ;, $, `. Spaces are allowed but not recommended - use underscores or hyphens instead.",
                  "description": "Path to the server script for 'stdio' transport. Examples: 'mcp_servers/weather_server.py', './scripts/my_server.py', '~/projects/server.py'. Avoid spaces in paths when possible.",
                  "markdownDescription": "**File path** - Path to the server script for 'stdio' transport. Examples: 'mcp_servers/weather_server.py', './scripts/my_server.py', '~/projects/server.py'. Avoid spaces in paths when possible."
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Path to the server script for 'stdio' transport. Examples: 'mcp_servers/weather_server.py', './scripts/my_server.py', '~/projects/server.py'. Avoid spaces in paths when possible.",
              "title": "Server Path"
            },
            "http_endpoint": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "URL endpoint for 'http_stream' transport.",
              "title": "Http Endpoint"
            },
            "headers": {
              "anyOf": [
                {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "HTTP headers for 'http_stream' transport.",
              "title": "Headers"
            },
            "command": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "The command to run for 'local' transport.",
              "title": "Command"
            },
            "args": {
              "anyOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Arguments for the 'local' transport command.",
              "title": "Args"
            },
            "roots": {
              "description": "List of root configurations for this client.",
              "items": {
                "$ref": "#/$defs/RootConfig"
              },
              "title": "Roots",
              "type": "array"
            },
            "capabilities": {
              "description": "List of capabilities this client provides (e.g., 'tools', 'prompts').",
              "items": {
                "enum": [
                  "tools",
                  "prompts",
                  "resources"
                ],
                "type": "string"
              },
              "title": "Capabilities",
              "type": "array"
            },
            "timeout": {
              "default": 10.0,
              "description": "Default timeout in seconds for client operations.",
              "title": "Timeout",
              "type": "number"
            },
            "registration_timeout": {
              "default": 30.0,
              "description": "Timeout for registering the mcp client",
              "title": "Registration Timeout",
              "type": "number"
            },
            "exclude": {
              "anyOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "List of component names (prompt, resource, tool) to exclude from this client.",
              "title": "Exclude"
            }
          },
          "required": [
            "name",
            "capabilities"
          ],
          "title": "ClientConfig",
          "type": "object"
        },
        {
          "description": "Configuration for the MCP host",
          "properties": {
            "name": {
              "description": "The unique name of the component.",
              "title": "Name",
              "type": "string"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "A brief description of the component.",
              "title": "Description"
            },
            "type": {
              "const": "host",
              "default": "host",
              "title": "Type",
              "type": "string"
            },
            "mcp_servers": {
              "description": "A list of MCP server client configurations.",
              "items": {
                "$ref": "#/$defs/ClientConfig"
              },
              "title": "Mcp Servers",
              "type": "array"
            }
          },
          "required": [
            "name",
            "mcp_servers"
          ],
          "title": "HostConfig",
          "type": "object"
        },
        {
          "description": "Configuration for a linear, sequential agent workflow.",
          "properties": {
            "name": {
              "description": "The unique name of the component.",
              "title": "Name",
              "type": "string"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "A brief description of the component.",
              "title": "Description"
            },
            "type": {
              "const": "linear_workflow",
              "default": "linear_workflow",
              "title": "Type",
              "type": "string"
            },
            "steps": {
              "description": "List of component names or component objects to execute in sequence.",
              "items": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "$ref": "#/$defs/WorkflowComponent"
                  }
                ]
              },
              "title": "Steps",
              "type": "array"
            },
            "include_history": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "If set, overrides the include_history setting for all agents in this workflow.",
              "title": "Include History"
            },
            "include_logging": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "If set, overrides the include_logging setting for all agents in this workflow.",
              "title": "Include Logging"
            }
          },
          "required": [
            "name",
            "steps"
          ],
          "title": "WorkflowConfig",
          "type": "object"
        },
        {
          "description": "Configuration for graph workflows",
          "properties": {
            "name": {
              "description": "The unique name of the component.",
              "title": "Name",
              "type": "string"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "A brief description of the component.",
              "title": "Description"
            },
            "type": {
              "const": "graph_workflow",
              "default": "graph_workflow",
              "title": "Type",
              "type": "string"
            },
            "nodes": {
              "description": "List of nodes in the graph.",
              "items": {
                "$ref": "#/$defs/GraphWorkflowNode"
              },
              "title": "Nodes",
              "type": "array"
            },
            "edges": {
              "description": "List of edges in the graph.",
              "items": {
                "$ref": "#/$defs/GraphWorkflowEdge"
              },
              "title": "Edges",
              "type": "array"
            },
            "include_history": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "If set, overrides the include_history setting for all agents in this workflow.",
              "title": "Include History"
            },
            "include_logging": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "If set, overrides the include_logging setting for all agents in this workflow.",
              "title": "Include Logging"
            }
          },
          "required": [
            "name",
            "nodes",
            "edges"
          ],
          "title": "GraphWorkflowConfig",
          "type": "object"
        },
        {
          "description": "Configuration for a custom Python-based workflow.",
          "properties": {
            "name": {
              "description": "The unique name of the component.",
              "title": "Name",
              "type": "string"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "A brief description of the component.",
              "title": "Description"
            },
            "type": {
              "const": "custom_workflow",
              "default": "custom_workflow",
              "title": "Type",
              "type": "string"
            },
            "module_path": {
              "description": "Resolved absolute path to the Python file containing the workflow class. Examples: 'mcp_servers/weather_server.py', './scripts/my_server.py', '~/projects/server.py'. Avoid spaces in paths when possible.",
              "format": "path",
              "title": "Module Path",
              "type": "string",
              "pattern": "^[a-zA-Z0-9\\._\\-/\\\\~][a-zA-Z0-9\\._\\-/\\\\ ~]*$",
              "patternErrorMessage": "Invalid path format. Avoid special characters like |, <, >, &, ;, $, `. Spaces are allowed but not recommended - use underscores or hyphens instead.",
              "markdownDescription": "**File path** - Resolved absolute path to the Python file containing the workflow class. Examples: 'mcp_servers/weather_server.py', './scripts/my_server.py', '~/projects/server.py'. Avoid spaces in paths when possible."
            },
            "class_name": {
              "description": "Name of the class within the module that implements the workflow.",
              "title": "Class Name",
              "type": "string"
            }
          },
          "required": [
            "name",
            "module_path",
            "class_name"
          ],
          "title": "CustomWorkflowConfig",
          "type": "object"
        },
        {
          "description": "Request model for QA testing.",
          "properties": {
            "name": {
              "description": "The unique name of the component.",
              "title": "Name",
              "type": "string"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "A brief description of the component.",
              "title": "Description"
            },
            "component_type": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Type of component being tested (agent, llm, mcp_server, workflow)",
              "title": "Component Type"
            },
            "component_config": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Configuration of the component being tested",
              "title": "Component Config"
            },
            "test_cases": {
              "description": "List of test cases to evaluate",
              "items": {
                "$ref": "#/$defs/EvaluationCase"
              },
              "title": "Test Cases",
              "type": "array"
            },
            "review_llm": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "LLM configuration ID to use for reviewing test results",
              "title": "Review Llm"
            },
            "expected_schema": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "JSON schema to validate output against",
              "title": "Expected Schema"
            },
            "component_refs": {
              "anyOf": [
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "List of component names to evaluate (for multi-component testing)",
              "title": "Component Refs"
            },
            "run_agent": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "A function that takes a string input and any number of additional arguments (see run_agent_kwargs) and returns the result of calling the agent.\n        This will be used for cases that do not have an output. If str, it will be treated as the filepath to a python file with the function named 'run'",
              "title": "Run Agent"
            },
            "run_agent_kwargs": {
              "additionalProperties": true,
              "description": "Additional keyword arguments to pass to the run_agent function beyond the required input string first argument",
              "title": "Run Agent Kwargs",
              "type": "object"
            },
            "use_cache": {
              "default": true,
              "description": "Whether to use cached results for test cases that have been evaluated before",
              "title": "Use Cache",
              "type": "boolean"
            },
            "cache_ttl": {
              "default": 3600,
              "description": "Time-to-live for cached results in seconds (default: 1 hour)",
              "title": "Cache Ttl",
              "type": "integer"
            },
            "force_refresh": {
              "default": false,
              "description": "Force re-execution of all test cases, bypassing cache",
              "title": "Force Refresh",
              "type": "boolean"
            },
            "evaluation_config_id": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "ID of the evaluation configuration (used for cache key generation)",
              "title": "Evaluation Config Id"
            }
          },
          "required": [
            "name",
            "test_cases"
          ],
          "title": "EvaluationConfig",
          "type": "object"
        },
        {
          "description": "Configuration for security assessments.\n\nThis is a wrapper that holds the security configuration dictionary\nthat will be parsed by the SecurityEngine using its own SecurityConfig model.",
          "properties": {
            "name": {
              "description": "The unique name of the component.",
              "title": "Name",
              "type": "string"
            },
            "description": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "A brief description of the component.",
              "title": "Description"
            },
            "type": {
              "const": "security",
              "default": "security",
              "title": "Type",
              "type": "string"
            },
            "config_dict": {
              "additionalProperties": true,
              "description": "Security configuration dictionary to be loaded by SecurityEngine",
              "title": "Config Dict",
              "type": "object"
            }
          },
          "required": [
            "name"
          ],
          "title": "SecurityConfig",
          "type": "object"
        }
      ],
      "description": "Single component configuration"
    }
  ],
  "$defs": {
    "LLMConfigOverrides": {
      "additionalProperties": true,
      "description": "A model for agent-specific overrides of LLM parameters.",
      "properties": {
        "model": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Overrides model from LLMConfig if specified.",
          "title": "Model"
        },
        "temperature": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Overrides temperature from LLMConfig if specified.",
          "title": "Temperature"
        },
        "max_tokens": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Overrides max_tokens from LLMConfig if specified.",
          "title": "Max Tokens"
        },
        "system_prompt": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "The primary system prompt for the agent.",
          "title": "System Prompt"
        },
        "api_base": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Overrides the base URL for the LLM.",
          "title": "Api Base"
        },
        "api_key": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Overrides the API key for the LLM.",
          "title": "Api Key"
        },
        "api_version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Overrides the API version for the LLM.",
          "title": "Api Version"
        }
      },
      "title": "LLMConfigOverrides",
      "type": "object"
    },
    "RootConfig": {
      "description": "Configuration for an MCP root",
      "properties": {
        "uri": {
          "description": "The URI of the root.",
          "title": "Uri",
          "type": "string"
        },
        "name": {
          "description": "The name of the root.",
          "title": "Name",
          "type": "string"
        },
        "capabilities": {
          "description": "A list of capabilities provided by this root. Must be one or more of: 'tools', 'prompts', 'resources'.",
          "items": {
            "enum": [
              "tools",
              "prompts",
              "resources"
            ],
            "type": "string"
          },
          "title": "Capabilities",
          "type": "array"
        }
      },
      "required": [
        "uri",
        "name",
        "capabilities"
      ],
      "title": "RootConfig",
      "type": "object"
    },
    "ClientConfig": {
      "description": "Configuration for an MCP client",
      "properties": {
        "name": {
          "description": "The unique name of the component.",
          "title": "Name",
          "type": "string"
        },
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A brief description of the component.",
          "title": "Description"
        },
        "type": {
          "const": "mcp_server",
          "default": "mcp_server",
          "title": "Type",
          "type": "string"
        },
        "transport_type": {
          "anyOf": [
            {
              "enum": [
                "stdio",
                "http_stream",
                "local"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "The transport type for the client.",
          "title": "Transport Type"
        },
        "server_path": {
          "anyOf": [
            {
              "format": "path",
              "type": "string"
            },
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Path to the server script for 'stdio' transport.",
          "title": "Server Path"
        },
        "http_endpoint": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "URL endpoint for 'http_stream' transport.",
          "title": "Http Endpoint"
        },
        "headers": {
          "anyOf": [
            {
              "additionalProperties": {
                "type": "string"
              },
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "HTTP headers for 'http_stream' transport.",
          "title": "Headers"
        },
        "command": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "The command to run for 'local' transport.",
          "title": "Command"
        },
        "args": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Arguments for the 'local' transport command.",
          "title": "Args"
        },
        "roots": {
          "description": "List of root configurations for this client.",
          "items": {
            "$ref": "#/$defs/RootConfig"
          },
          "title": "Roots",
          "type": "array"
        },
        "capabilities": {
          "description": "List of capabilities this client provides (e.g., 'tools', 'prompts').",
          "items": {
            "type": "string"
          },
          "title": "Capabilities",
          "type": "array"
        },
        "timeout": {
          "default": 10.0,
          "description": "Default timeout in seconds for client operations.",
          "title": "Timeout",
          "type": "number"
        },
        "registration_timeout": {
          "default": 30.0,
          "description": "Timeout for registering the mcp client",
          "title": "Registration Timeout",
          "type": "number"
        },
        "exclude": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of component names (prompt, resource, tool) to exclude from this client.",
          "title": "Exclude"
        }
      },
      "required": [
        "name",
        "capabilities"
      ],
      "title": "ClientConfig",
      "type": "object"
    },
    "WorkflowComponent": {
      "properties": {
        "name": {
          "description": "The name of the component in the workflow step.",
          "title": "Name",
          "type": "string"
        },
        "type": {
          "description": "The type of the component.",
          "enum": [
            "agent",
            "linear_workflow",
            "custom_workflow"
          ],
          "title": "Type",
          "type": "string"
        }
      },
      "required": [
        "name",
        "type"
      ],
      "title": "WorkflowComponent",
      "type": "object"
    },
    "GraphWorkflowEdge": {
      "properties": {
        "from": {
          "description": "The node_id of the node this edge is from.",
          "title": "From",
          "type": "string"
        },
        "to": {
          "description": "The node_id of the node this edge is to.",
          "title": "To",
          "type": "string"
        }
      },
      "required": [
        "from",
        "to"
      ],
      "title": "GraphWorkflowEdge",
      "type": "object"
    },
    "GraphWorkflowNode": {
      "properties": {
        "node_id": {
          "description": "The identifier for the node in the graph workflow.",
          "title": "Node Id",
          "type": "string"
        },
        "name": {
          "description": "The name of the component to run in the workflow step.",
          "title": "Name",
          "type": "string"
        },
        "type": {
          "const": "agent",
          "description": "The type of the component.",
          "title": "Type",
          "type": "string"
        }
      },
      "required": [
        "node_id",
        "name",
        "type"
      ],
      "title": "GraphWorkflowNode",
      "type": "object"
    },
    "EvaluationCase": {
      "properties": {
        "id": {
          "description": "A unique id for this evaluation test case",
          "format": "uuid",
          "title": "Id",
          "type": "string"
        },
        "name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "User-friendly name for this test case",
          "title": "Name"
        },
        "input": {
          "description": "The user input supplied in this case",
          "title": "Input",
          "type": "string"
        },
        "output": {
          "anyOf": [
            {},
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "The response from the component",
          "title": "Output"
        },
        "expectations": {
          "description": "A list of expectations about the output, like \"The output contains the temperature in Celcius\" or \"The get_weather tool was called once\".",
          "items": {
            "type": "string"
          },
          "title": "Expectations",
          "type": "array"
        }
      },
      "required": [
        "input",
        "expectations"
      ],
      "title": "EvaluationCase",
      "type": "object"
    }
  }
}